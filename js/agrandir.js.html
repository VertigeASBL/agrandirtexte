(function($) {
$.fn.agrandirtexte = function(options) {

  if (!this.length) { return this; }

  // Because this is sparta
  var sparta = {
    target: $(this)
  }

  // Fuuuusion
  opts = $.extend(true, sparta, $.fn.agrandirtexte.defaults, options);

  this.each(function() {

    // Si on clic sur moins
    $(".agrandirtexte_moins").on("click", function () {
      opts.target.find(opts.elem).each(function () {
        $(this).moins();
      });
    });

    // Si c'est un reset, on revient à la taille originale.
    $(".agrandirtexte_reset").on("click", function () {
      opts.target.find(opts.elem).each(function () {
        $(this).reset();
      });
    });

    // Si on clic sur plus
    $(".agrandirtexte_plus").on("click", function () {
      opts.target.find(opts.elem).each(function () {
        $(this).plus();
      });
    });
  });

  return this;
};

// default options
$.fn.agrandirtexte.defaults = {
  // Les éléments html qui seront recherché pour faire l'update de taille.
  elem: "p, li, a, td, h1, h2, h3, h4, h5, h6",
  step: 1
};

$.fn.moins = function () {
  size = parseInt($(this).css("font-size"));
  $(this).css({
    "font-size": (size-opts.step)+"px",
    "line-height": "normal"
  });
}

$.fn.reset = function () {
  // On supprime les style ajouté par le javascipt.
  $(this).removeAttr('style');
}

$.fn.plus = function () {
  size = parseInt($(this).css("font-size"));
  $(this).css({
    "font-size": (size+opts.step)+"px",
    "line-height": "normal"
  });
}

})(jQuery);

jQuery(document).ready(function($) {
  $("#CONFIG{agrandirtexte/selecteur}").agrandirtexte();
});