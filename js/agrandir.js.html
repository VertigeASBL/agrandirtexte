(function($) {
// What does the agrandirtexte plugin do?
$.fn.agrandirtexte = function(options) {

  if (!this.length) { return this; }

  var sparta = {
    target: $(this),
    size: parseInt($(this).css("font-size")),
    save_size: parseInt($(this).css("font-size")),
    lineHeight: $(this).css("line-height")
  }

  opts = $.extend(true, sparta, $.fn.agrandirtexte.defaults, options);

  console.log(opts);

  this.each(function() {

    // Evénement
    $(".agrandirtexte_moins").on("click", function () {
      opts.target.moins();
    });

    // Si c'est un reset, on revient à la taille originale.
    $(".agrandirtexte_reset").on("click", function () {
      opts.target.reset();
    });

    $(".agrandirtexte_plus").on("click", function () {
      opts.target.plus();
    });
  });

  return this;
};

// default options
$.fn.agrandirtexte.defaults = {};

$.fn.moins = function () {
  opts.size--;
  opts.target.css({
    "font-size": opts.size+"px",
    "line-height": "normal"
  });
}

$.fn.reset = function () {
  // On reset aussi la taille en cour d'utilisation.
  opts.size = opts.save_size;

  // On revient à save_size
  opts.target.css({
    "font-size": opts.save_size+"px",
    "line-height": opts.lineHeight
  });
}

$.fn.plus = function () {
  opts.size++;
  opts.target.css({
    "font-size": opts.size+"px",
    "line-height": "normal"
  });
}

})(jQuery);

jQuery(document).ready(function($) {
  $("#CONFIG{agrandirtexte/selecteur}").agrandirtexte();
});